<html>
  <head>
    <link rel="stylesheet" href="./xwebmidi.css">
  </head>
  <body>
    <div>input 01: <select id="input-port-01" class="xwebmidi-select-midi"></select></div>
    <div>input 02: <select id="input-port-02" class="xwebmidi-select-midi"></select></div>
    <div>output 01: <select id="output-port-01" class="xwebmidi-select-midi"></select></div>

    <br>

    <h3 id="devicesText" style="margin: 0px;">[Routing Diagram]</h3>
    <div><img src="./images/01.png"></div>

    <script type="module">
     import { xWebMIDI } from "./xwebmidi.js";
     (async () => {

       const xwm01 = new xWebMIDI();
       await xwm01.requestMIDIAccess(true);
       xwm01.initInput('input-port-01', 'xwebmidi-port-active');
       xwm01.initOutput('output-port-01', 'xwebmidi-port-active');

       const xwm02 = new xWebMIDI();
       await xwm02.requestMIDIAccess(true);
       xwm02.initInput('input-port-02', 'xwebmidi-port-active');

       window.addEventListener("midiin-event:input-port-01", (event) => {
         event.detail.data[0] += 0x01
         xwm01.sendRawMessage(event.detail.data);
         console.log(event.detail);
       });

       window.addEventListener("midiin-event:input-port-02", (event) => {
         event.detail.data[0] += 0x01
         xwm01.sendRawMessage(event.detail.data);
         console.log(event.detail);
       });

     })();
    </script>

  </body>
</html>
